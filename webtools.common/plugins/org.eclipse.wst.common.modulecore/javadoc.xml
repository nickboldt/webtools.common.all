<?xml version="1.0" encoding="UTF-8"?>

<project default="main" basedir=".">

	<property file="javadoc.properties" />

	<target name="main" depends="prephtml, javadoc" description="Builds Plugin Javadoc" />
	
	<target name="validate" description="Validates all XML and XSLT files.">
		<xmlvalidate lenient="true">
			<fileset dir=".." includes="**/overview.xml,**/package.xml" />
		</xmlvalidate>
	</target>

	<target name="prephtml" description="Transforms XML to HTML.">	
		<xslt 	style="javadoc.xsl" 
				includes="**/overview.xml,**/package.xml" 
				destdir="." /> 
	</target>

    <target name="javadoc">
        <javadoc access="public" 
				 author="false" 
					classpath="${classpath}" 
					destdir="doc" 
					doctitle="${component.title}" 
					nodeprecated="false" 
					nodeprecatedlist="false" 
					noindex="false" 
					nonavbar="false" 
					notree="false" 
					overview="${plugin.basedir}\component-overview\overview.html"
					packagenames="${api.packages}" 
					sourcepath="${plugin.sourcefolders}" 
					splitindex="true" 
					stylesheetfile="${plugin.basedir}\component-overview\overview\apistyles.css" 
					use="true" 
					version="true"
					breakiterator="no"
					/> 
		<copy todir="./doc/overview">
			<fileset dir="component-overview/overview/"/> 
		</copy>
		<delete>
			<fileset dir="." includes="**/package.html,**/overview.html"/>
		</delete>
    </target>
 
</project>

<!--  				"  -->
